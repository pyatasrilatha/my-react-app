{"ast":null,"code":"import _defineProperty from\"/Users/psrilat2/git/POC/my-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/psrilat2/git/POC/my-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/psrilat2/git/POC/my-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from'axios';import'./LoginForm.css';import{API_BASE_URL}from'../../constants/apiContants';import{withRouter}from\"react-router-dom\";function LoginForm(props){var _useState=useState({email:\"\",password:\"\",successMessage:null}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var handleChange=function handleChange(e){var _e$target=e.target,id=_e$target.id,value=_e$target.value;setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},id,value));});};var handleSubmitClick=function handleSubmitClick(e){e.preventDefault();var payload={\"email\":state.email,\"password\":state.password};axios.post(API_BASE_URL+'login',payload).then(function(response){if(response.data.code===200){setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{'successMessage':'Login successful. Redirecting to home page..'});});redirectToHome();props.showError(null);}else if(response.data.code===204){props.showError(\"Username and password do not match\");}else{props.showError(\"Username does not exists\");}}).catch(function(error){console.log(error);});};var redirectToHome=function redirectToHome(){props.updateTitle('Home');props.history.push('/home');};var redirectToRegister=function redirectToRegister(){props.history.push('/register');props.updateTitle('Register');};return/*#__PURE__*/React.createElement(\"div\",{className:\"card col-12 col-lg-4 login-card mt-2 hv-center\"},/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group text-left\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"exampleInputEmail1\"},\"Email address\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",\"aria-describedby\":\"emailHelp\",placeholder:\"Enter email\",value:state.email,onChange:handleChange}),/*#__PURE__*/React.createElement(\"small\",{id:\"emailHelp\",className:\"form-text text-muted\"},\"We'll never share your email with anyone else.\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group text-left\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"exampleInputPassword1\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",placeholder:\"Password\",value:state.password,onChange:handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-check\"}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:handleSubmitClick},\"Submit\")),/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-success mt-2\",style:{display:state.successMessage?'block':'none'},role:\"alert\"},state.successMessage),/*#__PURE__*/React.createElement(\"div\",{className:\"registerMessage\"},/*#__PURE__*/React.createElement(\"span\",null,\"Dont have an account? \"),/*#__PURE__*/React.createElement(\"span\",{className:\"loginText\",onClick:function onClick(){return redirectToRegister();}},\"Register\")));}export default withRouter(LoginForm);","map":{"version":3,"sources":["/Users/psrilat2/git/POC/my-react-app/src/components/LoginForm/LoginForm.js"],"names":["React","useState","axios","API_BASE_URL","withRouter","LoginForm","props","email","password","successMessage","state","setState","handleChange","e","target","id","value","prevState","handleSubmitClick","preventDefault","payload","post","then","response","data","code","redirectToHome","showError","catch","error","console","log","updateTitle","history","push","redirectToRegister","display"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport axios from 'axios';\nimport './LoginForm.css';\nimport {API_BASE_URL} from '../../constants/apiContants';\nimport { withRouter } from \"react-router-dom\";\n\nfunction LoginForm(props) {\n    const [state , setState] = useState({\n        email : \"\",\n        password : \"\",\n        successMessage: null\n    })\n    const handleChange = (e) => {\n        const {id , value} = e.target   \n        setState(prevState => ({\n            ...prevState,\n            [id] : value\n        }))\n    }\n\n    const handleSubmitClick = (e) => {\n        e.preventDefault();\n        const payload={\n            \"email\":state.email,\n            \"password\":state.password,\n        }\n        axios.post(API_BASE_URL+'login', payload)\n            .then(function (response) {\n                if(response.data.code === 200){\n                    setState(prevState => ({\n                        ...prevState,\n                        'successMessage' : 'Login successful. Redirecting to home page..'\n                    }))\n                    redirectToHome();\n                    props.showError(null)\n                }\n                else if(response.data.code === 204){\n                    props.showError(\"Username and password do not match\");\n                }\n                else{\n                    props.showError(\"Username does not exists\");\n                }\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n    }\n    const redirectToHome = () => {\n        props.updateTitle('Home')\n        props.history.push('/home');\n    }\n    const redirectToRegister = () => {\n        props.history.push('/register'); \n        props.updateTitle('Register');\n    }\n    return(\n        <div className=\"card col-12 col-lg-4 login-card mt-2 hv-center\">\n            <form>\n                <div className=\"form-group text-left\">\n                <label htmlFor=\"exampleInputEmail1\">Email address</label>\n                <input type=\"email\" \n                       className=\"form-control\" \n                       id=\"email\" \n                       aria-describedby=\"emailHelp\" \n                       placeholder=\"Enter email\" \n                       value={state.email}\n                       onChange={handleChange}\n                />\n                <small id=\"emailHelp\" className=\"form-text text-muted\">We'll never share your email with anyone else.</small>\n                </div>\n                <div className=\"form-group text-left\">\n                <label htmlFor=\"exampleInputPassword1\">Password</label>\n                <input type=\"password\" \n                       className=\"form-control\" \n                       id=\"password\" \n                       placeholder=\"Password\"\n                       value={state.password}\n                       onChange={handleChange} \n                />\n                </div>\n                <div className=\"form-check\">\n                </div>\n                <button \n                    type=\"submit\" \n                    className=\"btn btn-primary\"\n                    onClick={handleSubmitClick}\n                >Submit</button>\n            </form>\n            <div className=\"alert alert-success mt-2\" style={{display: state.successMessage ? 'block' : 'none' }} role=\"alert\">\n                {state.successMessage}\n            </div>\n            <div className=\"registerMessage\">\n                <span>Dont have an account? </span>\n                <span className=\"loginText\" onClick={() => redirectToRegister()}>Register</span> \n            </div>\n        </div>\n    )\n}\n\nexport default withRouter(LoginForm);"]},"metadata":{},"sourceType":"module"}